# 面试者背景


:::warning
**7****年，****Java****后端，****2****家大厂工作各****3****年，下单页、订单、性能，稳定性，民宿业务，导购、页面耗时优化，**

**导购页面性能优化方案，有哪些？有哪些技术手段？链路梳理、流程优化（异步）、代码性能优化、外调接口异步，线程池并行查询，****completableFuture****，**

**如果外部接口的****RT****无法保证，如何处理？弱依赖、降级。比如评价没查到，如何降级？**

**如果有一个外部接口必要降级，你自己会怎么做？**

**completableFuture****用了它的什么功能？流式编程，他和****executorService****区别是啥？线程窃取，**

**导购这部分的难点？性能，复用性，**

**分库分表做过吗？分库分表之后全局****ID****如何做的？雪花算法（时间戳、机器码、业务类型、标记位），时钟回拨问题？分表字段如何选的？分表算法是什么？假如****128****分表不够了怎么办？再扩容****+****迁移、数据清理。业务不中断情况下数据迁移如何做？存量迁移和增量双写之间如何避免丢数据？**

**如果有一个大的商户，导致数据倾斜，如何解决？**

**幂等是什么？如何保证读幂等？读用做幂等吗？写请求的幂等如何保证？加锁、校验、执行。加锁用什么锁？不加锁有啥问题？如果有唯一性约束了，还需要加锁吗？****f(x)=****  ****f(f(x))**

**Redis****实现分布锁的时候，哪些问题需要考虑？超时时间、****redisson****（****watchdog****）、****redlock****解决的是什么问题？拿到锁的机器挂了会有啥问题吗？**

**工作****7****年来，遇到的最大挑战是什么？稳定性，衡量稳定性指标？****SLA,****几个九（宕机时间）、**

**设计一个高可用的架构考虑哪些方案？异地多活、微服务、限流熔断降级、**

**限流、降级，熔断区别是啥？限流保护自己、给外部接口降级、**

**压测做过吗？什么是全链路压测？如何避免压测数据影响正常数据？压测标、影子表。压测标自己识别吗？**

**大促除了压测，预案怎么做的？大促封网状态，如何保证预案能执行？预案开关、**

**线上问题排查案例讲一个。Fullgc，如何用arthas定位到那个大的list的？**

:::

# 题目解析


:::color4
导购页面性能优化方案，有哪些？有哪些技术手段？链路梳理、流程优化（异步）、代码性能优化、外调接口异步，线程池并行查询，completableFuture，

如果外部接口的RT无法保证，如何处理？弱依赖、降级。比如评价没查到，如何降级？

如果有一个外部接口必要降级，你自己会怎么做？

completableFuture用了它的什么功能？流式编程，他和executorService区别是啥？线程窃取，

导购这部分的难点？性能，复用性，

:::



[✅使用CompletableFuture完成并发编排，提升接口性能](https://www.yuque.com/hollis666/qyhor6/wwbg7zocoo7ubisl)



[✅和外部机构交互如何防止被外部服务不可用而拖垮](https://www.yuque.com/hollis666/qyhor6/xn8ucm3w3exfazpp)



[✅限流、降级、熔断有什么区别？](https://www.yuque.com/hollis666/qyhor6/etgovbs6bgphlqso)





:::color4
分库分表做过吗？分库分表之后全局ID如何做的？

雪花算法？（时间戳、机器码、业务类型、标记位），时钟回拨问题？分表字段如何选的？分表算法是什么？

假如128分表不够了怎么办？再扩容+迁移、数据清理。

业务不中断情况下数据迁移如何做？存量迁移和增量双写之间如何避免丢数据？

如果有一个大的商户，导致数据倾斜，如何解决？

:::



[✅分表后全局ID如何生成？](https://www.yuque.com/hollis666/qyhor6/glyv4twwk6bfs6dr)



[✅什么是雪花算法，怎么保证不重复的？](https://www.yuque.com/hollis666/qyhor6/rsocc4sd7v9i0pvc)



[✅什么是数据倾斜，会带来哪些问题？如何解决？](https://www.yuque.com/hollis666/qyhor6/fue0vmwupk5zps37)



:::color4
幂等是什么？如何保证读幂等？读用做幂等吗？写请求的幂等如何保证？加锁、校验、执行。加锁用什么锁？不加锁有啥问题？如果有唯一性约束了，还需要加锁吗？f(x)=  f(f(x))

:::



[✅如何解决接口幂等的问题？](https://www.yuque.com/hollis666/qyhor6/gz2qwl)



:::color4
Redis实现分布锁的时候，哪些问题需要考虑？超时时间、redisson（watchdog）、redlock解决的是什么问题？拿到锁的机器挂了会有啥问题吗？

:::



[✅如何用Redisson实现分布式锁？](https://www.yuque.com/hollis666/qyhor6/gdsvngueclva39ve)



[✅什么是RedLock，他解决了什么问题？](https://www.yuque.com/hollis666/qyhor6/lxzg0ubs2xpvenxw)





:::color4
工作7年来，遇到的最大挑战是什么？稳定性，衡量稳定性指标？SLA,几个九（宕机时间）、

:::



[✅什么是SLA？](https://www.yuque.com/hollis666/qyhor6/axrowbs50bhxehao)



:::color4
设计一个高可用的架构考虑哪些方案？异地多活、微服务、限流熔断降级、

限流、降级，熔断区别是啥？限流保护自己、给外部接口降级、

:::



[✅如何设计一个高可用架构？](https://www.yuque.com/hollis666/qyhor6/vyg778x53xe6elwe)





[✅限流、降级、熔断有什么区别？](https://www.yuque.com/hollis666/qyhor6/etgovbs6bgphlqso)



:::color4
压测做过吗？什么是全链路压测？如何避免压测数据影响正常数据？压测标、影子表。压测标自己识别吗？

大促除了压测，预案怎么做的？大促封网状态，如何保证预案能执行？预案开关、

:::



[✅什么是全链路压测？](https://www.yuque.com/hollis666/qyhor6/igx3g283upzhgpm4)





:::color4
线上问题排查案例讲一个。Fullgc，如何用arthas定位到那个大的list的？

:::



[✅频繁FullGC问题排查](https://www.yuque.com/hollis666/qyhor6/iocmzc)



[✅频繁FullGC问题排查(2)](https://www.yuque.com/hollis666/qyhor6/zpkzwgx4o9g89s8x)

